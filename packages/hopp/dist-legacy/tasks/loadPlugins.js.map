{"version":3,"sources":["../../src/tasks/loadPlugins.js"],"names":["directory","pkg","require","_","concat","Object","keys","dependencies","devDependencies","peerDependencies","filter","start","dep","substr"],"mappings":";;;;;;;;AAAA;;;;;;AAMA;;;;;;mCAKe,UAAMA,SAAN,EAAmB;AAChC,QAAMC,MAAO,YAAM;AACjB,UAAI;AACF,eAAOC,QAAQF,YAAY,eAApB,CAAP;AACD,OAFD,CAEE,OAAOG,CAAP,EAAU;AACV,eAAO,EAAP;AACD;AACF,KANW,EAAZ;;AAQA;;;AAGA,WAAO,GAAGC,MAAH,CACLC,OAAOC,IAAP,CAAYL,IAAIM,YAAJ,IAAoB,EAAhC,CADK,EAELF,OAAOC,IAAP,CAAYL,IAAIO,eAAJ,IAAuB,EAAnC,CAFK,EAGLH,OAAOC,IAAP,CAAYL,IAAIQ,gBAAJ,IAAwB,EAApC,CAHK,EAILC,MAJK,CAIE,eAAO;AACd,UAAMC,QAAQC,IAAIC,MAAJ,CAAW,CAAX,EAAc,EAAd,CAAd;AACA,aAAOF,UAAU,cAAV,IAA4BA,UAAU,cAA7C;AACD,KAPM,CAAP;AAQD,G","file":"../../src/tasks/loadPlugins.js","sourcesContent":["/**\n * @file src/plugins/load.js\n * @license MIT\n * @copyright 2017 10244872 Canada Inc.\n */\n\n/**\n * Loads the list of plugins defined in the package.json.\n * @param {String} path to directory with package.json\n * @return {Promise} resolves with array of paths to plugins\n */\nexport default async directory => {\n  const pkg = (() => {\n    try {\n      return require(directory + '/package.json')\n    } catch (_) {\n      return {}\n    }\n  })()\n\n  /**\n   * Filter for appropriate dependencies.\n   */\n  return [].concat(\n    Object.keys(pkg.dependencies || {}),\n    Object.keys(pkg.devDependencies || {}),\n    Object.keys(pkg.peerDependencies || {})\n  ).filter(dep => {\n    const start = dep.substr(0, 12)\n    return start === 'hopp-plugin-' || start === 'hopp-preset-'\n  })\n}\n"]}