{"version":3,"sources":["../../src/utils/fn.js"],"names":["cache","args","slice","call","last","pop","val","i","a","length","hasOwnProperty","fn","apply","concat"],"mappings":";;;;;;;;AAAA;;;;;;AAMA;;;kBAGe,cAAM;AACnB,MAAMA,QAAQ,EAAd;;AAEA,mDAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACCC,gBADD,GACQ,GAAGC,KAAH,CAASC,IAAT,OADR;AAECC,gBAFD,GAEQH,KAAKI,GAAL,EAFR;AAIDC,eAJC,GAIKN,KAJL;;AAKL,iBAASO,CAAT,GAAa,CAAb,EAAgBC,CAAhB,GAAoBP,KAAK,CAAL,CAApB,EAA6BM,IAAIN,KAAKQ,MAAtC,EAA8CF,KAAK,CAAL,EAAQC,IAAIP,KAAKM,CAAL,CAA1D,EAAmE;AACjED,oBAAMA,IAAIE,CAAJ,IAASF,IAAIE,CAAJ,KAAU,EAAzB;AACD;;AAPI,gBASAF,IAAII,cAAJ,CAAmBN,IAAnB,CATA;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAUsBO,GAAGC,KAAH,CAAS,IAAT,EAAeX,KAAKY,MAAL,CAAY,CAACT,IAAD,CAAZ,CAAf,CAVtB;;AAAA;AAAA,6CAUIE,IAAIF,IAAJ,CAVJ;;AAAA;AAAA,6CAaEE,IAAIF,IAAJ,CAbF;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAP;AAeD,C","file":"fn.js","sourcesContent":["/**\n * @file src/utils/fn.js\n * @license MIT\n * @copyright 2017 10244872 Canada Inc.\n */\n\n/**\n * Makes async functions deterministic.\n */\nexport default fn => {\n  const cache = {}\n\n  return async function () {\n    const args = [].slice.call(arguments)\n    const last = args.pop()\n\n    let val = cache\n    for (let i = 0, a = args[0]; i < args.length; i += 1, a = args[i]) {\n      val = val[a] = val[a] || {}\n    }\n\n    if (!val.hasOwnProperty(last)) {\n      return val[last] = await fn.apply(this, args.concat([last]))\n    }\n\n    return val[last]\n  }\n}\n"]}