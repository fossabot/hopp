{"version":3,"sources":["../../src/tasks/loadPlugins.js"],"names":["directory","pkg","require","_","concat","Object","keys","dependencies","devDependencies","peerDependencies","filter","dep","startsWith"],"mappings":";;;;;;;;AAAA;;;;;;AAMA;;;;;;mCAKe,UAAMA,SAAN,EAAmB;AAChC,UAAMC,MAAM,CAAC,MAAM;AACjB,UAAI;AACF,eAAOC,QAAQF,YAAY,eAApB,CAAP;AACD,OAFD,CAEE,OAAOG,CAAP,EAAU;AACV,eAAO,EAAP;AACD;AACF,KANW,GAAZ;;AAQA;;;AAGA,WAAO,GAAGC,MAAH,CACLC,OAAOC,IAAP,CAAYL,IAAIM,YAAJ,IAAoB,EAAhC,CADK,EAELF,OAAOC,IAAP,CAAYL,IAAIO,eAAJ,IAAuB,EAAnC,CAFK,EAGLH,OAAOC,IAAP,CAAYL,IAAIQ,gBAAJ,IAAwB,EAApC,CAHK,EAILC,MAJK,CAIEC,OAAOA,IAAIC,UAAJ,CAAe,cAAf,CAJT,CAAP;AAKD,G","file":"../../src/tasks/loadPlugins.js","sourcesContent":["/**\n * @file src/plugins/load.js\n * @license MIT\n * @copyright 2017 10244872 Canada Inc.\n */\n\n/**\n * Loads the list of plugins defined in the package.json.\n * @param {String} path to directory with package.json\n * @return {Promise} resolves with array of paths to plugins\n */\nexport default async directory => {\n  const pkg = (() => {\n    try {\n      return require(directory + '/package.json')\n    } catch (_) {\n      return {}\n    }\n  })()\n\n  /**\n   * Filter for appropriate dependencies.\n   */\n  return [].concat(\n    Object.keys(pkg.dependencies || {}),\n    Object.keys(pkg.devDependencies || {}),\n    Object.keys(pkg.peerDependencies || {})\n  ).filter(dep => dep.startsWith('hopp-plugin-'))\n}\n"]}